---
slug: Guide to using Docusaurus with Material UI
title: "Guide: Docusaurus with Material UI"
authors: [reap3r]
tags:
  [
    material ui,
    material,
    docusaurus,
    cssvarsprovider,
    theme,
    dark mode,
    light mode,
  ]
---

import Container from "@mui/system/Container";
import Box from "@mui/system/Box";
import Card from "@mui/material/Card";
import Grid from "@mui/material/Grid";
import Typography from "@mui/material/Typography";
import {
  Experimental_CssVarsProvider as CssVarsProvider,
  experimental_extendTheme as extendTheme,
} from "@mui/material/styles";
import theme from "@site/src/pages/mui-theme";

After fighting Docusaurus and Material UI in the creation of this website - I decided to write a post explaining how to use them together so you don't have to go through the same struggle I did.

import meme from "./materialui-with-docusaurus.jpg";

<div style={{ textAlign: "center" }}>
  <img src={meme} alt="Docusaurus with MUI meme" style={{ width: 500 }} />
</div>

<!--truncate-->

This post assumes you already have [Docusaurus](https://docusaurus.io/docs/installation) installed and started up using your favorite development environment.

## Install Material UI

Install the MUI core.

```bash
npm install @mui/material @emotion/react @emotion/styled
```

## Using Material UI Components

Once installed you can use the MUI components and other tools like normal. Import them, and use them in your `.jsx` and `.mdx` code. I used them to style the homepage.

```jsx
import Container from "@mui/system/Container";
import Card from "@mui/material/Card";
import Grid from "@mui/material/Grid";
import Typography from "@mui/material/Typography";

<Grid container justifyContent="center" sx={{ paddingBottom: 8 }}>
  <Grid item xs={12}>
    <Card
      variant="outlined"
      sx={{
        textAlign: "center",
        boxShadow: 3,
      }}
    >
      <Typography variant="h4">This is an example</Typography>
    </Card>
  </Grid>
</Grid>;
```

<Grid container justifyContent="center" sx={{ paddingBottom: 8 }}>
  <Grid item xs={12}>
    <Card
      variant="outlined"
      sx={{
        textAlign: "center",
        boxShadow: 3,
      }}
    >
      <Typography variant="h4">This is an example</Typography>
    </Card>
  </Grid>
</Grid>

Try changing the color theme using the Docusaurus button. Notice how the above example does not change color depending on which color theme is chosen? Let's fix that.

## Matching Docusaurus and MUI Theme

This was the fun part. I wanted to be able to make the MUI components update theme along with Docusaurus.

### Material UI CSS Theme Variables

For integrating MUI theme with Docusaurus, I opted for using the MUI experimental [CSS Theme Variables](https://mui.com/material-ui/experimental-api/css-theme-variables/overview/). It allows you to create both your light and dark colors in the same theme, and switch between them using MUIs `setMode` from `useColorScheme`.

### Create MUI Color Theme

I first created my color scheme in a file I named `mui-theme.jsx`. Like MUIs `createTheme`, you only need to specify the variables you wish to change from default. A simplified theme is below.

```jsx title="/src/pages/mui-theme.jsx"
import { experimental_extendTheme as extendTheme } from "@mui/material/styles";

// General MUI theme
const extTheme = extendTheme({
  colorSchemes: {
    light: {
      palette: {
        primary: {
          main: "hsl(240, 48%, 47%)",
        },
      },
    },
    dark: {
      palette: {
        primary: {
          main: "hsl(240, 90%, 70%)",
        },
      },
    },
  },
});

export default extTheme;
```

### Docusaurus useColorMode

One of the important pieces of information we need from Docusaurus, is what the current color theme is. In order to get this, we can use the Docusaurus provided hook [useColorMode](https://docusaurus.io/docs/api/themes/configuration/#use-color-mode).

An important bit of information in their docs is that the component which calls `useColorMode` must be a child of the `Layout` component.

:::info

This by default is inside the `Home` component at `/src/pages/index.js`

:::

### Syncing the Themes

First, we need to import them MUI theme, and wrap it around the `Layout` component.

```jsx title="index.js"
import Layout from "@theme/Layout";
// import your created theme
import theme from "./mui-theme";

export default function Home() {
  const { siteConfig } = useDocusaurusContext();
  return (
    <>
      <CssVarsProvider theme={theme}>
        <Layout
          title={`Reap3r ${siteConfig.title}`}
          description="Documentation on web development tips, tools, and techniques. By Reap3r"
          // description="Description will go into a meta tag in <head />"
        >
          <HomepageHeader />
          <main>
            <HomepageCards />
          </main>
        </Layout>
      </CssVarsProvider>
    </>
  );
}
```

Then inside `HomepageHeader`, we can access the Docusaurus color mode, and use it to switch the MUI color theme.

```jsx title="index.js"
function HomepageHeader() {
  // colorMode holds the Docusaurus theme
  const { colorMode } = useColorMode();

  // MUI color mode setting
  const { setMode } = useColorScheme();

  // set Material UI theme based on Docusaurus theme
  useEffect(() => {
    // useEffect: https://www.w3schools.com/react/react_useeffect.asp
    // added useEffect because I was getting an error https://stackoverflow.com/questions/62336340/cannot-update-a-component-while-rendering-a-different-component-warning
    setMode(colorMode === "dark" ? "dark" : "light");
  }, [colorMode]);

  return <header> your themed MUI components here... </header>;
}
```

## Using MUI Them Elsewhere

Now that the themes sync, we can use that synced theme anywhere on the site! Including this blog section. All we need to do is import our theme, and wrap items in `<CssVarsProvider>`. You can even reference your theme variables from within the components. Below I added using the `primary.main` color for the text (which changes between dark and light mode).

```jsx title="This blog post"
import Container from "@mui/system/Container";
import Card from "@mui/material/Card";
import Grid from "@mui/material/Grid";
import Typography from "@mui/material/Typography";
import { Experimental_CssVarsProvider as CssVarsProvider } from "@mui/material/styles";
import theme from "@site/src/pages/mui-theme";

<CssVarsProvider theme={theme}>
  <Grid container justifyContent="center" sx={{ paddingBottom: 8 }}>
    <Grid item xs={12}>
      <Card
        variant="outlined"
        sx={{
          textAlign: "center",
          boxShadow: 3,
        }}
      >
        <Typography variant="h4">This is an example</Typography>
      </Card>
    </Grid>
  </Grid>
</CssVarsProvider>;
```

<CssVarsProvider theme={theme}>
  <Grid container justifyContent="center" sx={{ paddingBottom: 8 }}>
    <Grid item xs={12}>
      <Card
        variant="outlined"
        sx={{
          textAlign: "center",
          boxShadow: 3,
        }}
      >
        <Typography variant="h4" sx={{ color: "primary.main" }}>
          This is an example
        </Typography>
      </Card>
    </Grid>
  </Grid>
</CssVarsProvider>

Now try changing the color theme using the Docusaurus button. Notice how the above example **DOES** change color depending on which color theme is chosen?

import meme2 from "./theme-synced.jpg";

<div style={{ textAlign: "center" }}>
  <img src={meme2} alt="Theme synced meme" style={{ width: 500 }} />
</div>

## Further Documentation

For further details on MUIs CSS theme variables, see their **[documentation](https://mui.com/material-ui/experimental-api/css-theme-variables/customization/)**

import CallingCard from "@site/src/components/CallingCard/index";

<CallingCard />
